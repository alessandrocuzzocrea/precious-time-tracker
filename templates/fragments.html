{{define "entry-row"}}
<tr id="entry-{{.ID}}">
    <td>{{.Description}}</td>
    <td>{{.StartTime.Format "Jan 02 15:04:05"}}</td>
    <td>
        {{if .EndTime.Valid}}
            {{.EndTime.Time.Format "15:04:05"}}
        {{else}}
            <em>Active</em>
        {{end}}
    </td>
    <td>{{duration .StartTime .EndTime}}</td>
    <td>
        <button class="btn btn-sm" 
                hx-get="/entry/{{.ID}}/edit" 
                hx-target="#entry-{{.ID}}" 
                hx-swap="outerHTML">
            Edit
        </button>
        <button class="btn btn-sm btn-danger"
                hx-delete="/entry/{{.ID}}"
                hx-target="#entry-{{.ID}}"
                hx-swap="outerHTML"
                hx-confirm="Are you sure?">
            Delete
        </button>
    </td>
</tr>
{{end}}

{{define "edit-entry-row"}}
<tr id="entry-{{.Entry.ID}}">
    <td>
        {{if .Error}}
            <div style="color: red; font-size: 0.8em; margin-bottom: 5px;">{{.Error}}</div>
        {{end}}
        <input type="text" name="description" value="{{.Entry.Description}}" class="form-control" autofocus>
    </td>
    <td>
        <input type="text" name="start_time" 
               value="{{.Entry.StartTime.Format "2006-01-02 15:04:05"}}" 
               placeholder="YYYY-MM-DD HH:MM:SS"
               class="form-control time-input start-time"
               style="width: 160px;">
    </td>
    <td>
        <input type="text" name="end_time" 
               value="{{if .Entry.EndTime.Valid}}{{.Entry.EndTime.Time.Format "2006-01-02 15:04:05"}}{{end}}" 
               placeholder="YYYY-MM-DD HH:MM:SS"
               class="form-control time-input end-time"
               style="width: 160px;">
    </td>
    <td><span class="live-duration">{{duration .Entry.StartTime .Entry.EndTime}}</span></td>
    <td>
        <button class="btn btn-sm btn-primary" 
                hx-put="/entry/{{.Entry.ID}}" 
                hx-target="#entry-{{.Entry.ID}}" 
                hx-swap="outerHTML"
                hx-include="closest tr">
            Save
        </button>
        <button class="btn btn-sm" 
                hx-get="/entry/{{.Entry.ID}}" 
                hx-target="#entry-{{.Entry.ID}}" 
                hx-swap="outerHTML">
            Cancel
        </button>
    </td>
</tr>
{{end}}
